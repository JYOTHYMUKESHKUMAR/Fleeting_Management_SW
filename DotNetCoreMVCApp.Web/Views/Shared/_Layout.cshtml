@using DotNetCoreMVCApp.Models.Entities;
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewData["Title"] - Asset Management System</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="~/plugins/fontawesome-free/css/all.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="~/dist/css/adminlte.min.css">

    <style>
        /* Base Layout */
        .wrapper {
            min-width: 1200px;
            overflow-x: auto;
        }

        .container-fluid {
            width: 100%;
            min-width: 1200px;
            padding: 0 20px;
        }

        /* Navbar Styles */
        .custom-navbar {
            background: #007bff;
            padding: 0;
            min-width: 1200px;
            height: 60px;
        }

        .navbar-brand {
            color: #fff !important;
            font-weight: 600;
            font-size: 1.3rem;
            padding: 0 15px;
            margin-right: 20px;
            white-space: nowrap;
            height: 60px;
            display: flex;
            align-items: center;
        }

        /* Navigation Items */
        .navbar-nav {
            display: flex;
            align-items: center;
            height: 60px;
        }

        .nav-item {
            height: 60px;
            display: flex;
            align-items: center;
            margin: 0 2px;
        }

        .nav-link {
            color: #fff !important;
            padding: 0 15px !important;
            height: 60px;
            display: flex;
            align-items: center;
            position: relative;
            white-space: nowrap;
        }

        .nav-icon {
            margin-right: 8px;
            font-size: 16px;
        }

        /* Badge */
        .navbar-badge {
            position: absolute;
            top: 10px;
            right: 5px;
            font-size: 10px;
            padding: 2px 4px;
        }

        /* User Menu */
        .user-menu {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            margin: 0 10px;
            height: 40px;
            display: flex;
            align-items: center;
        }

            .user-menu .nav-link {
                height: 40px;
                padding: 0 15px !important;
            }

        /* Content Area */
        .content-wrapper {
            background-color: #f4f6f9;
            margin-left: 0 !important;
            min-height: calc(100vh - 60px);
            min-width: 1200px;
        }

        .content {
            padding: 20px 0;
        }

        /* Footer */
        .main-footer {
            margin-left: 0 !important;
            background: #fff;
            border-top: 1px solid #dee2e6;
            padding: 15px 20px;
            min-width: 1200px;
            color: #869099;
        }

        /* Hover Effects */
        .nav-link:hover {
            background: rgba(255,255,255,0.1);
        }

        .navbar-brand:hover {
            background: rgba(255,255,255,0.1);
        }
    </style>
    @RenderSection("Styles", required: false)
</head>
<body class="hold-transition layout-top-nav">
    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand custom-navbar">
            <div class="container-fluid">
                <a href="@Url.Action("Index", "Home")" class="navbar-brand">
                    <img src="~/dist/img/Efilogo.png" alt="EFI Logo" class="brand-image img-circle elevation-3" style="opacity: .8; width: 35px; margin-right: 10px;">
                    <span>EFI Asset Mgmt</span>
                </a>

                <!-- Left navbar links -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="@Url.Action("Index", "Home")" class="nav-link">
                            <i class="fas fa-home nav-icon"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="@Url.Action("Index", "ConsumptionDetails")" class="nav-link">
                            <i class="fas fa-gas-pump nav-icon"></i> Fuel Logs
                            <span class="badge badge-warning navbar-badge">New</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="@Url.Action("Index", "Driver")" class="nav-link">
                            <i class="fas fa-users nav-icon"></i> Drivers
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="@Url.Action("Index", "Vehicle")" class="nav-link">
                            <i class="fas fa-truck-moving nav-icon"></i> Vehicle Database
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="@Url.Action("Index", "FuelReportEntity")" class="nav-link">
                            <i class="fas fa-gas-pump nav-icon"></i> Fueling Information Report
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="@Url.Action("Dashboard", "Home")" class="nav-link">
                            <i class="fas fa-tachometer-alt nav-icon"></i> Dashboard
                        </a>
                    </li>
                    @if (User.IsInRole("Admin"))
                    {
                        <li class="nav-item">
                            <a href="@Url.Action("Register", "Account")" class="nav-link">
                                <i class="fas fa-user-plus nav-icon"></i> Register User
                            </a>
                        </li>
                    }
                </ul>

                <!-- Right navbar links -->
                <ul class="navbar-nav ml-auto">
                    @if (SignInManager.IsSignedIn(User))
                    {
                        <li class="nav-item user-menu">
                            <span class="nav-link">
                                <i class="fas fa-user nav-icon"></i>
                                @User.Identity?.Name
                            </span>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="@Url.Action("SignOut", "Account")">
                                <i class="fas fa-sign-out-alt nav-icon"></i> Logout
                            </a>
                        </li>
                    }
                </ul>
            </div>
        </nav>

        <!-- Content Wrapper -->
        <div class="content-wrapper">
            <!-- Main content -->
            <div class="content">
                <div class="container-fluid">
                    @RenderBody()
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="container-fluid">
                <div class="float-right d-none d-sm-block">
                    <b>Version</b> 3.2.0
                </div>
                <strong>Copyright &copy; @DateTime.Now.Year <a href="https://excellencefactors.com">Excellence Factors International</a>.</strong>
                All rights reserved.
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="~/plugins/jquery/jquery.min.js"></script>
    <script src="~/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/dist/js/adminlte.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/js/tempusdominus-bootstrap-4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script>
        // Add active class to current nav item
        $(document).ready(function () {
            var currentUrl = window.location.pathname;
            $('.navbar-nav a[href="' + currentUrl + '"]').addClass('active');
        });
    </script>
    @RenderSection("Scripts", required: false)
</body>
</html>